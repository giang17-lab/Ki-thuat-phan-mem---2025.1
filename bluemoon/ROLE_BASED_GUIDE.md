# ğŸ›¡ï¸ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Há»‡ Thá»‘ng Quáº£n LÃ½ Theo Role

## ğŸ“‹ Tá»•ng Quan

Há»‡ thá»‘ng Quáº£n LÃ½ Chung CÆ° Blue Moon Ä‘Ã£ Ä‘Æ°á»£c sá»­a Ä‘á»•i Ä‘á»ƒ há»— trá»£ **2 cháº¿ Ä‘á»™ khÃ¡c nhau** dá»±a trÃªn vai trÃ² (Role) cá»§a ngÆ°á»i dÃ¹ng:

### 1ï¸âƒ£ **Admin (Quáº£n Trá»‹ ViÃªn)**
- **TÃ i khoáº£n máº·c Ä‘á»‹nh**: `admin` / `password123`
- CÃ³ quyá»n truy cáº­p toÃ n bá»™ há»‡ thá»‘ng
- CÃ³ thá»ƒ duyá»‡t/tá»« chá»‘i yÃªu cáº§u tá»« user

### 2ï¸âƒ£ **User (NgÆ°á»i DÃ¹ng ThÆ°á»ng)**
- **Táº¡o khi Ä‘Äƒng kÃ½** - táº¥t cáº£ tÃ i khoáº£n má»›i sáº½ cÃ³ role `user`
- Chá»‰ xem thÃ´ng tin cá»§a chÃ­nh mÃ¬nh
- YÃªu cáº§u thÃªm xe hoáº·c nhÃ¢n kháº©u sáº½ Ä‘Æ°á»£c gá»­i cho admin duyá»‡t

---

## ğŸ” CÃ¡ch ÄÄƒng Nháº­p

### ÄÄƒng nháº­p vá»›i tÃ i khoáº£n Admin:
```
Username: admin
Password: password123
â†’ Sáº½ Ä‘Æ°á»£c chuyá»ƒn tá»›i /admin (Admin Panel)
```

### ÄÄƒng nháº­p vá»›i tÃ i khoáº£n User:
```
Username: [tÃªn Ä‘Äƒng nháº­p cá»§a báº¡n]
Password: [máº­t kháº©u cá»§a báº¡n]
â†’ Sáº½ Ä‘Æ°á»£c chuyá»ƒn tá»›i /user (User Dashboard)
```

---

## ğŸ‘¨â€ğŸ’¼ Chá»©c NÄƒng Admin Panel (`/admin`)

### **Tab 1: Há»™ Gia ÄÃ¬nh**
- âœ… Xem **danh sÃ¡ch táº¥t cáº£** há»™ gia Ä‘Ã¬nh
- âœ… **ThÃªm má»›i** há»™ gia Ä‘Ã¬nh
- âœ… **Sá»­a** thÃ´ng tin há»™ gia Ä‘Ã¬nh
- âœ… **XÃ³a** há»™ gia Ä‘Ã¬nh
- âœ… Quáº£n lÃ½ táº¥t cáº£ thÃ´ng tin (xe, nhÃ¢n kháº©u, v.v.)

### **Tab 2: YÃªu Cáº§u Chá» Duyá»‡t**
- ğŸ“¥ Xem danh sÃ¡ch **yÃªu cáº§u thÃªm xe** tá»« user
- ğŸ“¥ Xem danh sÃ¡ch **yÃªu cáº§u thÃªm nhÃ¢n kháº©u** tá»« user
- âœ… **PhÃª duyá»‡t** yÃªu cáº§u â†’ thÃªm vÃ o há»‡ thá»‘ng
- âŒ **Tá»« chá»‘i** yÃªu cáº§u â†’ xÃ³a khá»i hÃ ng chá»

### **Quy trÃ¬nh duyá»‡t yÃªu cáº§u:**
1. User gá»­i yÃªu cáº§u (xe/nhÃ¢n kháº©u) tá»« User Dashboard
2. YÃªu cáº§u xuáº¥t hiá»‡n á»Ÿ Tab "YÃªu Cáº§u Chá» Duyá»‡t"
3. Admin xem chi tiáº¿t vÃ  chá»n "PhÃª Duyá»‡t" hoáº·c "Tá»« Chá»‘i"
4. Náº¿u phÃª duyá»‡t â†’ thÃªm vÃ o há»‡ thá»‘ng
5. Náº¿u tá»« chá»‘i â†’ user pháº£i gá»­i láº¡i

---

## ğŸ‘¤ Chá»©c NÄƒng User Dashboard (`/user`)

### **ThÃ´ng Tin Há»™ Gia ÄÃ¬nh** (Chá»‰ Xem)
- ğŸ‘ï¸ Xem thÃ´ng tin chá»§ há»™
- ğŸ‘ï¸ Xem mÃ£ cÄƒn há»™
- ğŸ‘ï¸ Xem diá»‡n tÃ­ch

> âš ï¸ **KhÃ´ng thá»ƒ sá»­a** - chá»‰ cÃ³ admin cÃ³ quyá»n

### **Xe Cá»™**
- ğŸ‘ï¸ Xem **danh sÃ¡ch xe cá»§a mÃ¬nh**
- â• **ThÃªm xe má»›i** â†’ Gá»­i yÃªu cáº§u cho admin
- âŒ **KhÃ´ng thá»ƒ xÃ³a** - pháº£i liÃªn há»‡ admin

### **NhÃ¢n Kháº©u**
- ğŸ‘ï¸ Xem **danh sÃ¡ch thÃ nh viÃªn gia Ä‘Ã¬nh**
- â• **ThÃªm nhÃ¢n kháº©u má»›i** â†’ Gá»­i yÃªu cáº§u cho admin
- âŒ **KhÃ´ng thá»ƒ xÃ³a** - pháº£i liÃªn há»‡ admin

### **CÃ¡ch thÃªm xe/nhÃ¢n kháº©u:**
1. Nháº¥n nÃºt **"+ ThÃªm Xe"** hoáº·c **"+ ThÃªm NhÃ¢n Kháº©u"**
2. Äiá»n thÃ´ng tin vÃ o form
3. Nháº¥n **"Gá»­i YÃªu Cáº§u"**
4. ThÃ´ng bÃ¡o: *"YÃªu cáº§u cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c gá»­i cho admin"*
5. Chá» admin duyá»‡t trong tab **"YÃªu Cáº§u Chá» Duyá»‡t"**

---

## ğŸ”„ Luá»“ng Dá»¯ Liá»‡u

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User gá»­i yÃªu cáº§u thÃªm xe/nhÃ¢n kháº©u     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ YÃªu cáº§u lÆ°u vÃ o localStorage            â”‚
â”‚ (pendingRequests)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin nhÃ¬n tháº¥y yÃªu cáº§u á»Ÿ                â”‚
â”‚ Tab "YÃªu Cáº§u Chá» Duyá»‡t"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                â–¼
    âœ… PhÃª Duyá»‡t    âŒ Tá»« Chá»‘i
         â”‚                â”‚
         â–¼                â–¼
    XÃ³a khá»i     XÃ³a khá»i
    hÃ ng chá»     hÃ ng chá»
```

---

## ğŸ› ï¸ CÃ´ng Nghá»‡ ÄÆ°á»£c DÃ¹ng

### Frontend:
- **React 19** - UI component
- **React Router** - Navigation & routing
- **ProtectedRoute** - Kiá»ƒm tra quyá»n trÆ°á»›c khi vÃ o trang

### Backend:
- **Express.js** - Server
- **JWT** - Authentication
- **MySQL** - Database
- Role-based access control (RBAC)

---

## ğŸ“ Thay Äá»•i ChÃ­nh

### Files ÄÆ°á»£c Táº¡o Má»›i:
- âœ¨ [AdminPanel.jsx](src/pages/AdminPanel.jsx) - Giao diá»‡n admin
- âœ¨ [UserDashboard.jsx](src/pages/UserDashboard.jsx) - Giao diá»‡n user

### Files ÄÆ°á»£c Sá»­a Äá»•i:
- ğŸ”§ [AuthContext.jsx](src/context/AuthContext.jsx) - ThÃªm `isAdmin`, `isUser`
- ğŸ”§ [router.jsx](src/router/router.jsx) - ThÃªm route `/admin` vÃ  `/user`
- ğŸ”§ [ProtectedRoute.jsx](src/router/ProtectedRoute.jsx) - ThÃªm role validation
- ğŸ”§ [Dashboard.jsx](src/pages/Dashboard.jsx) - Redirect dá»±a trÃªn role
- ğŸ”§ [Dashboard.module.css](src/pages/Dashboard.module.css) - ThÃªm styles má»›i

---

## ğŸš€ CÃ¡ch Cháº¡y Dá»± Ãn

### Frontend:
```bash
cd blue-moon-fe
npm install
npm run dev      # Cháº¡y trÃªn http://localhost:5173
```

### Backend:
```bash
cd blue-moon-backend
npm install
npm start        # Cháº¡y trÃªn http://localhost:3000
```

---

## âš¡ LÆ°u Ã Quan Trá»ng

### ğŸ“Œ LÆ°u Trá»¯ YÃªu Cáº§u:
Hiá»‡n táº¡i, yÃªu cáº§u Ä‘Æ°á»£c lÆ°u trong **localStorage** (táº¡m thá»i).
- Náº¿u **xÃ³a localStorage**, yÃªu cáº§u sáº½ máº¥t
- **Trong thá»±c táº¿**, cáº§n táº¡o báº£ng `Requests` trong database

### ğŸ” Báº£o Máº­t:
- Role Ä‘Æ°á»£c lÆ°u trong **JWT token** (backend phÃ¡t hÃ nh)
- Frontend kiá»ƒm tra role Ä‘á»ƒ hiá»ƒn thá»‹ UI phÃ¹ há»£p
- Backend nÃªn thÃªm `requireRole()` middleware cho cÃ¡c route nháº¡y cáº£m

### ğŸ”„ TÆ°Æ¡ng Lai:
Äá»ƒ hoÃ n thiá»‡n, cáº§n:
1. Táº¡o báº£ng `YeuCauThemXe` vÃ  `YeuCauThemNhanKhau` trong DB
2. Táº¡o API endpoint xá»­ lÃ½ yÃªu cáº§u (POST, GET, PUT)
3. ThÃªm notification real-time (WebSocket)
4. ThÃªm email notification cho admin

---

## ğŸ“ Há»— Trá»£

Náº¿u cÃ³ váº¥n Ä‘á», kiá»ƒm tra:
- âœ… Token JWT cÃ²n hiá»‡u lá»±c (24h)
- âœ… Browser localStorage khÃ´ng bá»‹ xÃ³a
- âœ… Backend API Ä‘ang cháº¡y trÃªn port 3000
- âœ… Frontend Ä‘ang cháº¡y trÃªn port 5173
